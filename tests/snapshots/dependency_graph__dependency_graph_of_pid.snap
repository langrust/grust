---
source: tests/dependency_graph.rs
expression: file
---
typedefs:
  - Structure:
      id: GainPID
      fields:
        - - k_p
          - Float
        - - k_i
          - Float
        - - k_d
          - Float
      location: ~
functions:
  - id: min
    inputs:
      - - a
        - Float
      - - b
        - Float
    statements:
      - id: test
        element_type: Boolean
        expression:
          Application:
            function_expression:
              Identifier:
                id: " > "
                typing:
                  Abstract:
                    - - Float
                      - Float
                    - Boolean
                location: ~
            inputs:
              - Identifier:
                  id: a
                  typing: Float
                  location: ~
              - Identifier:
                  id: b
                  typing: Float
                  location: ~
            typing: Boolean
            location: ~
        location: ~
      - id: result
        element_type: Float
        expression:
          Application:
            function_expression:
              Identifier:
                id: if_then_else
                typing:
                  Abstract:
                    - - Boolean
                      - Float
                      - Float
                    - Float
                location: ~
            inputs:
              - Identifier:
                  id: test
                  typing: Boolean
                  location: ~
              - Identifier:
                  id: b
                  typing: Float
                  location: ~
              - Identifier:
                  id: a
                  typing: Float
                  location: ~
            typing: Float
            location: ~
        location: ~
    returned:
      - Float
      - Identifier:
          id: result
          typing: Float
          location: ~
    location: ~
nodes:
  - id: integrate
    is_component: false
    inputs:
      - - x
        - Float
      - - dt
        - Float
    unscheduled_equations:
      MAX_INTEGRALE:
        scope: Local
        id: MAX_INTEGRALE
        signal_type: Float
        expression:
          Constant:
            constant:
              Float: 1000
            typing: Float
            location: ~
            dependencies: []
        location: ~
      i:
        scope: Output
        id: i
        signal_type: Float
        expression:
          FunctionApplication:
            function_expression:
              Identifier:
                id: min
                typing:
                  Abstract:
                    - - Float
                      - Float
                    - Float
                location: ~
            inputs:
              - FunctionApplication:
                  function_expression:
                    Identifier:
                      id: " + "
                      typing:
                        Abstract:
                          - - Float
                            - Float
                          - Float
                      location: ~
                  inputs:
                    - SignalCall:
                        signal:
                          id: prev_i
                          scope: Local
                        typing: Float
                        location: ~
                        dependencies:
                          - - prev_i
                            - 0
                    - FunctionApplication:
                        function_expression:
                          Identifier:
                            id: " * "
                            typing:
                              Abstract:
                                - - Float
                                  - Float
                                - Float
                            location: ~
                        inputs:
                          - SignalCall:
                              signal:
                                id: x
                                scope: Input
                              typing: Float
                              location: ~
                              dependencies:
                                - - x
                                  - 0
                          - SignalCall:
                              signal:
                                id: dt
                                scope: Input
                              typing: Float
                              location: ~
                              dependencies:
                                - - dt
                                  - 0
                        typing: Float
                        location: ~
                        dependencies:
                          - - x
                            - 0
                          - - dt
                            - 0
                  typing: Float
                  location: ~
                  dependencies:
                    - - prev_i
                      - 0
                    - - x
                      - 0
                    - - dt
                      - 0
              - SignalCall:
                  signal:
                    id: MAX_INTEGRALE
                    scope: Local
                  typing: Float
                  location: ~
                  dependencies:
                    - - MAX_INTEGRALE
                      - 0
            typing: Float
            location: ~
            dependencies:
              - - prev_i
                - 0
              - - x
                - 0
              - - dt
                - 0
              - - MAX_INTEGRALE
                - 0
        location: ~
      prev_i:
        scope: Local
        id: prev_i
        signal_type: Float
        expression:
          FollowedBy:
            constant:
              Float: 0
            expression:
              SignalCall:
                signal:
                  id: i
                  scope: Output
                typing: Float
                location: ~
                dependencies:
                  - - i
                    - 0
            typing: Float
            location: ~
            dependencies:
              - - i
                - 1
        location: ~
    unitary_nodes: {}
    contract:
      requires: []
      ensures: []
      invariant: []
      assert: []
    location: ~
    graph:
      vertices:
        MAX_INTEGRALE:
          id: MAX_INTEGRALE
          value: Black
          neighbors: []
        dt:
          id: dt
          value: Black
          neighbors: []
        i:
          id: i
          value: Black
          neighbors:
            - id: prev_i
              label:
                Weight: 0
            - id: x
              label:
                Weight: 0
            - id: dt
              label:
                Weight: 0
            - id: MAX_INTEGRALE
              label:
                Weight: 0
        prev_i:
          id: prev_i
          value: Black
          neighbors:
            - id: i
              label:
                Weight: 1
        x:
          id: x
          value: Black
          neighbors: []
  - id: derive
    is_component: false
    inputs:
      - - x
        - Float
      - - dt
        - Float
    unscheduled_equations:
      d:
        scope: Output
        id: d
        signal_type: Float
        expression:
          FunctionApplication:
            function_expression:
              Identifier:
                id: " / "
                typing:
                  Abstract:
                    - - Float
                      - Float
                    - Float
                location: ~
            inputs:
              - FunctionApplication:
                  function_expression:
                    Identifier:
                      id: (_)
                      typing:
                        Abstract:
                          - - Float
                          - Float
                      location: ~
                  inputs:
                    - FunctionApplication:
                        function_expression:
                          Identifier:
                            id: " - "
                            typing:
                              Abstract:
                                - - Float
                                  - Float
                                - Float
                            location: ~
                        inputs:
                          - SignalCall:
                              signal:
                                id: x
                                scope: Input
                              typing: Float
                              location: ~
                              dependencies:
                                - - x
                                  - 0
                          - SignalCall:
                              signal:
                                id: prev_x
                                scope: Local
                              typing: Float
                              location: ~
                              dependencies:
                                - - prev_x
                                  - 0
                        typing: Float
                        location: ~
                        dependencies:
                          - - x
                            - 0
                          - - prev_x
                            - 0
                  typing: Float
                  location: ~
                  dependencies:
                    - - x
                      - 0
                    - - prev_x
                      - 0
              - SignalCall:
                  signal:
                    id: dt
                    scope: Input
                  typing: Float
                  location: ~
                  dependencies:
                    - - dt
                      - 0
            typing: Float
            location: ~
            dependencies:
              - - x
                - 0
              - - prev_x
                - 0
              - - dt
                - 0
        location: ~
      prev_x:
        scope: Local
        id: prev_x
        signal_type: Float
        expression:
          FollowedBy:
            constant:
              Float: 0
            expression:
              SignalCall:
                signal:
                  id: x
                  scope: Input
                typing: Float
                location: ~
                dependencies:
                  - - x
                    - 0
            typing: Float
            location: ~
            dependencies:
              - - x
                - 1
        location: ~
    unitary_nodes: {}
    contract:
      requires: []
      ensures: []
      invariant: []
      assert: []
    location: ~
    graph:
      vertices:
        d:
          id: d
          value: Black
          neighbors:
            - id: x
              label:
                Weight: 0
            - id: prev_x
              label:
                Weight: 0
            - id: dt
              label:
                Weight: 0
        dt:
          id: dt
          value: Black
          neighbors: []
        prev_x:
          id: prev_x
          value: Black
          neighbors:
            - id: x
              label:
                Weight: 1
        x:
          id: x
          value: Black
          neighbors: []
component:
  id: pid
  is_component: true
  inputs:
    - - v_c
      - Float
    - - v
      - Float
    - - dt
      - Float
  unscheduled_equations:
    e:
      scope: Local
      id: e
      signal_type: Float
      expression:
        FunctionApplication:
          function_expression:
            Identifier:
              id: " - "
              typing:
                Abstract:
                  - - Float
                    - Float
                  - Float
              location: ~
          inputs:
            - SignalCall:
                signal:
                  id: v_c
                  scope: Input
                typing: Float
                location: ~
                dependencies:
                  - - v_c
                    - 0
            - SignalCall:
                signal:
                  id: v
                  scope: Input
                typing: Float
                location: ~
                dependencies:
                  - - v
                    - 0
          typing: Float
          location: ~
          dependencies:
            - - v_c
              - 0
            - - v
              - 0
      location: ~
    e_d:
      scope: Local
      id: e_d
      signal_type: Float
      expression:
        NodeApplication:
          node: derive
          inputs:
            - SignalCall:
                signal:
                  id: e
                  scope: Local
                typing: Float
                location: ~
                dependencies:
                  - - e
                    - 0
            - SignalCall:
                signal:
                  id: dt
                  scope: Input
                typing: Float
                location: ~
                dependencies:
                  - - dt
                    - 0
          signal: d
          typing: Float
          location: ~
          dependencies:
            - - e
              - 0
            - - e
              - 1
            - - dt
              - 0
      location: ~
    e_i:
      scope: Local
      id: e_i
      signal_type: Float
      expression:
        NodeApplication:
          node: integrate
          inputs:
            - SignalCall:
                signal:
                  id: e
                  scope: Local
                typing: Float
                location: ~
                dependencies:
                  - - e
                    - 0
            - SignalCall:
                signal:
                  id: dt
                  scope: Input
                typing: Float
                location: ~
                dependencies:
                  - - dt
                    - 0
          signal: i
          typing: Float
          location: ~
          dependencies:
            - - e
              - 0
            - - dt
              - 0
      location: ~
    gain:
      scope: Local
      id: gain
      signal_type:
        Structure: GainPID
      expression:
        Structure:
          name: GainPID
          fields:
            - - k_p
              - Constant:
                  constant:
                    Float: 0.2
                  typing: Float
                  location: ~
                  dependencies: []
            - - k_i
              - Constant:
                  constant:
                    Float: 1.5
                  typing: Float
                  location: ~
                  dependencies: []
            - - k_d
              - Constant:
                  constant:
                    Float: 6
                  typing: Float
                  location: ~
                  dependencies: []
          typing:
            Structure: GainPID
          location: ~
          dependencies: []
      location: ~
    u:
      scope: Output
      id: u
      signal_type: Float
      expression:
        Match:
          expression:
            SignalCall:
              signal:
                id: gain
                scope: Local
              typing:
                Structure: GainPID
              location: ~
              dependencies:
                - - gain
                  - 0
          arms:
            - - Structure:
                  name: GainPID
                  fields:
                    - - k_p
                      - Identifier:
                          name: k_p
                          location: ~
                    - - k_i
                      - Identifier:
                          name: k_i
                          location: ~
                    - - k_d
                      - Identifier:
                          name: k_d
                          location: ~
                  location: ~
              - ~
              - []
              - FunctionApplication:
                  function_expression:
                    Identifier:
                      id: " + "
                      typing:
                        Abstract:
                          - - Float
                            - Float
                          - Float
                      location: ~
                  inputs:
                    - FunctionApplication:
                        function_expression:
                          Identifier:
                            id: " + "
                            typing:
                              Abstract:
                                - - Float
                                  - Float
                                - Float
                            location: ~
                        inputs:
                          - FunctionApplication:
                              function_expression:
                                Identifier:
                                  id: " * "
                                  typing:
                                    Abstract:
                                      - - Float
                                        - Float
                                      - Float
                                  location: ~
                              inputs:
                                - SignalCall:
                                    signal:
                                      id: k_p
                                      scope: Local
                                    typing: Float
                                    location: ~
                                    dependencies:
                                      - - k_p
                                        - 0
                                - SignalCall:
                                    signal:
                                      id: e
                                      scope: Local
                                    typing: Float
                                    location: ~
                                    dependencies:
                                      - - e
                                        - 0
                              typing: Float
                              location: ~
                              dependencies:
                                - - k_p
                                  - 0
                                - - e
                                  - 0
                          - FunctionApplication:
                              function_expression:
                                Identifier:
                                  id: " * "
                                  typing:
                                    Abstract:
                                      - - Float
                                        - Float
                                      - Float
                                  location: ~
                              inputs:
                                - SignalCall:
                                    signal:
                                      id: k_i
                                      scope: Local
                                    typing: Float
                                    location: ~
                                    dependencies:
                                      - - k_i
                                        - 0
                                - SignalCall:
                                    signal:
                                      id: e_i
                                      scope: Local
                                    typing: Float
                                    location: ~
                                    dependencies:
                                      - - e_i
                                        - 0
                              typing: Float
                              location: ~
                              dependencies:
                                - - k_i
                                  - 0
                                - - e_i
                                  - 0
                        typing: Float
                        location: ~
                        dependencies:
                          - - k_p
                            - 0
                          - - e
                            - 0
                          - - k_i
                            - 0
                          - - e_i
                            - 0
                    - FunctionApplication:
                        function_expression:
                          Identifier:
                            id: " * "
                            typing:
                              Abstract:
                                - - Float
                                  - Float
                                - Float
                            location: ~
                        inputs:
                          - SignalCall:
                              signal:
                                id: k_d
                                scope: Local
                              typing: Float
                              location: ~
                              dependencies:
                                - - k_d
                                  - 0
                          - SignalCall:
                              signal:
                                id: e_d
                                scope: Local
                              typing: Float
                              location: ~
                              dependencies:
                                - - e_d
                                  - 0
                        typing: Float
                        location: ~
                        dependencies:
                          - - k_d
                            - 0
                          - - e_d
                            - 0
                  typing: Float
                  location: ~
                  dependencies:
                    - - k_p
                      - 0
                    - - e
                      - 0
                    - - k_i
                      - 0
                    - - e_i
                      - 0
                    - - k_d
                      - 0
                    - - e_d
                      - 0
          typing: Float
          location: ~
          dependencies:
            - - e
              - 0
            - - e_i
              - 0
            - - e_d
              - 0
            - - gain
              - 0
      location: ~
  unitary_nodes: {}
  contract:
    requires: []
    ensures: []
    invariant: []
    assert: []
  location: ~
  graph:
    vertices:
      dt:
        id: dt
        value: Black
        neighbors: []
      e:
        id: e
        value: Black
        neighbors:
          - id: v_c
            label:
              Weight: 0
          - id: v
            label:
              Weight: 0
      e_d:
        id: e_d
        value: Black
        neighbors:
          - id: e
            label:
              Weight: 0
          - id: e
            label:
              Weight: 1
          - id: dt
            label:
              Weight: 0
      e_i:
        id: e_i
        value: Black
        neighbors:
          - id: e
            label:
              Weight: 0
          - id: dt
            label:
              Weight: 0
      gain:
        id: gain
        value: Black
        neighbors: []
      u:
        id: u
        value: Black
        neighbors:
          - id: e
            label:
              Weight: 0
          - id: e_i
            label:
              Weight: 0
          - id: e_d
            label:
              Weight: 0
          - id: gain
            label:
              Weight: 0
      v:
        id: v
        value: Black
        neighbors: []
      v_c:
        id: v_c
        value: Black
        neighbors: []
location: ~

