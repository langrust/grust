---
source: tests/rust_ast_from_lir.rs
expression: project
---
directory: ""
files:
  - path: src/integrate_i.rs
    items:
      - Import:
          Use:
            public_visibility: false
            tree:
              Path:
                module_name: crate
                tree:
                  Path:
                    module_name: functions
                    tree:
                      Name:
                        name: min
                        alias: ~
      - Structure:
          public_visibility: true
          name: IntegrateIInput
          fields:
            - public_visibility: true
              name: x
              type:
                Identifier:
                  identifier: f64
            - public_visibility: true
              name: dt
              type:
                Identifier:
                  identifier: f64
      - Structure:
          public_visibility: true
          name: IntegrateIState
          fields:
            - public_visibility: false
              name: mem_prev_i
              type:
                Identifier:
                  identifier: f64
      - Implementation:
          trait_name: ~
          type_name: IntegrateIState
          items:
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: init
                  receiver: ~
                  inputs: []
                  output:
                    Identifier:
                      identifier: IntegrateIState
                body:
                  statements:
                    - ExpressionLast:
                        Structure:
                          name: IntegrateIState
                          fields:
                            - name: mem_prev_i
                              expression:
                                Literal:
                                  literal:
                                    Float: 0
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: step
                  receiver:
                    reference: true
                    mutable: true
                  inputs:
                    - - input
                      - Identifier:
                          identifier: IntegrateIInput
                  output:
                    Identifier:
                      identifier: f64
                body:
                  statements:
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: MAX_INTEGRALE
                        expression:
                          Literal:
                            literal:
                              Float: 1000
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: prev_i
                        expression:
                          FieldAccess:
                            expression:
                              Identifier:
                                identifier: self
                            field:
                              Named: mem_prev_i
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: i
                        expression:
                          FunctionCall:
                            function:
                              Identifier:
                                identifier: min
                            arguments:
                              - Binary:
                                  left:
                                    Identifier:
                                      identifier: prev_i
                                  operator: Add
                                  right:
                                    Binary:
                                      left:
                                        FieldAccess:
                                          expression:
                                            Identifier:
                                              identifier: input
                                          field:
                                            Named: x
                                      operator: Mul
                                      right:
                                        FieldAccess:
                                          expression:
                                            Identifier:
                                              identifier: input
                                          field:
                                            Named: dt
                              - Identifier:
                                  identifier: MAX_INTEGRALE
                    - ExpressionIntern:
                        Assignement:
                          left:
                            FieldAccess:
                              expression:
                                Identifier:
                                  identifier: self
                              field:
                                Named: mem_prev_i
                          right:
                            Identifier:
                              identifier: i
                    - ExpressionLast:
                        Identifier:
                          identifier: i
  - path: src/derive_d.rs
    items:
      - Structure:
          public_visibility: true
          name: DeriveDInput
          fields:
            - public_visibility: true
              name: x
              type:
                Identifier:
                  identifier: f64
            - public_visibility: true
              name: dt
              type:
                Identifier:
                  identifier: f64
      - Structure:
          public_visibility: true
          name: DeriveDState
          fields:
            - public_visibility: false
              name: mem_prev_x
              type:
                Identifier:
                  identifier: f64
      - Implementation:
          trait_name: ~
          type_name: DeriveDState
          items:
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: init
                  receiver: ~
                  inputs: []
                  output:
                    Identifier:
                      identifier: DeriveDState
                body:
                  statements:
                    - ExpressionLast:
                        Structure:
                          name: DeriveDState
                          fields:
                            - name: mem_prev_x
                              expression:
                                Literal:
                                  literal:
                                    Float: 0
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: step
                  receiver:
                    reference: true
                    mutable: true
                  inputs:
                    - - input
                      - Identifier:
                          identifier: DeriveDInput
                  output:
                    Identifier:
                      identifier: f64
                body:
                  statements:
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: prev_x
                        expression:
                          FieldAccess:
                            expression:
                              Identifier:
                                identifier: self
                            field:
                              Named: mem_prev_x
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: d
                        expression:
                          Binary:
                            left:
                              Unary:
                                operator: Brackets
                                expression:
                                  Binary:
                                    left:
                                      FieldAccess:
                                        expression:
                                          Identifier:
                                            identifier: input
                                        field:
                                          Named: x
                                    operator: Sub
                                    right:
                                      Identifier:
                                        identifier: prev_x
                            operator: Div
                            right:
                              FieldAccess:
                                expression:
                                  Identifier:
                                    identifier: input
                                field:
                                  Named: dt
                    - ExpressionIntern:
                        Assignement:
                          left:
                            FieldAccess:
                              expression:
                                Identifier:
                                  identifier: self
                              field:
                                Named: mem_prev_x
                          right:
                            FieldAccess:
                              expression:
                                Identifier:
                                  identifier: input
                              field:
                                Named: x
                    - ExpressionLast:
                        Identifier:
                          identifier: d
  - path: src/pid_u.rs
    items:
      - Import:
          Use:
            public_visibility: false
            tree:
              Path:
                module_name: crate
                tree:
                  Path:
                    module_name: derive_d
                    tree: Star
      - Import:
          Use:
            public_visibility: false
            tree:
              Path:
                module_name: crate
                tree:
                  Path:
                    module_name: integrate_i
                    tree: Star
      - Import:
          Use:
            public_visibility: false
            tree:
              Path:
                module_name: crate
                tree:
                  Path:
                    module_name: typedefs
                    tree:
                      Name:
                        name: GainPID
                        alias: ~
      - Structure:
          public_visibility: true
          name: PidUInput
          fields:
            - public_visibility: true
              name: v_c
              type:
                Identifier:
                  identifier: f64
            - public_visibility: true
              name: v
              type:
                Identifier:
                  identifier: f64
            - public_visibility: true
              name: dt
              type:
                Identifier:
                  identifier: f64
      - Structure:
          public_visibility: true
          name: PidUState
          fields:
            - public_visibility: false
              name: derive_d_e_d
              type:
                Identifier:
                  identifier: DeriveDState
            - public_visibility: false
              name: integrate_i_e_i
              type:
                Identifier:
                  identifier: IntegrateIState
      - Implementation:
          trait_name: ~
          type_name: PidUState
          items:
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: init
                  receiver: ~
                  inputs: []
                  output:
                    Identifier:
                      identifier: PidUState
                body:
                  statements:
                    - ExpressionLast:
                        Structure:
                          name: PidUState
                          fields:
                            - name: derive_d_e_d
                              expression:
                                FunctionCall:
                                  function:
                                    Identifier:
                                      identifier: "DeriveDState::init"
                                  arguments: []
                            - name: integrate_i_e_i
                              expression:
                                FunctionCall:
                                  function:
                                    Identifier:
                                      identifier: "IntegrateIState::init"
                                  arguments: []
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: step
                  receiver:
                    reference: true
                    mutable: true
                  inputs:
                    - - input
                      - Identifier:
                          identifier: PidUInput
                  output:
                    Identifier:
                      identifier: f64
                body:
                  statements:
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: e
                        expression:
                          Binary:
                            left:
                              FieldAccess:
                                expression:
                                  Identifier:
                                    identifier: input
                                field:
                                  Named: v_c
                            operator: Sub
                            right:
                              FieldAccess:
                                expression:
                                  Identifier:
                                    identifier: input
                                field:
                                  Named: v
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: e_d
                        expression:
                          MethodCall:
                            receiver:
                              FieldAccess:
                                expression:
                                  Identifier:
                                    identifier: self
                                field:
                                  Named: derive_d_e_d
                            method: step
                            arguments:
                              - Structure:
                                  name: DeriveDInput
                                  fields:
                                    - name: x
                                      expression:
                                        Identifier:
                                          identifier: e
                                    - name: dt
                                      expression:
                                        FieldAccess:
                                          expression:
                                            Identifier:
                                              identifier: input
                                          field:
                                            Named: dt
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: e_i
                        expression:
                          MethodCall:
                            receiver:
                              FieldAccess:
                                expression:
                                  Identifier:
                                    identifier: self
                                field:
                                  Named: integrate_i_e_i
                            method: step
                            arguments:
                              - Structure:
                                  name: IntegrateIInput
                                  fields:
                                    - name: x
                                      expression:
                                        Identifier:
                                          identifier: e
                                    - name: dt
                                      expression:
                                        FieldAccess:
                                          expression:
                                            Identifier:
                                              identifier: input
                                          field:
                                            Named: dt
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: gain
                        expression:
                          Structure:
                            name: GainPID
                            fields:
                              - name: k_p
                                expression:
                                  Literal:
                                    literal:
                                      Float: 0.2
                              - name: k_i
                                expression:
                                  Literal:
                                    literal:
                                      Float: 1.5
                              - name: k_d
                                expression:
                                  Literal:
                                    literal:
                                      Float: 6
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: u
                        expression:
                          Match:
                            matched:
                              Identifier:
                                identifier: gain
                            arms:
                              - pattern:
                                  Structure:
                                    name: GainPID
                                    fields:
                                      - name: k_p
                                        pattern:
                                          Identifier:
                                            reference: false
                                            mutable: false
                                            identifier: k_p
                                      - name: k_i
                                        pattern:
                                          Identifier:
                                            reference: false
                                            mutable: false
                                            identifier: k_i
                                      - name: k_d
                                        pattern:
                                          Identifier:
                                            reference: false
                                            mutable: false
                                            identifier: k_d
                                    dots: false
                                guard: ~
                                body:
                                  Binary:
                                    left:
                                      Binary:
                                        left:
                                          Binary:
                                            left:
                                              Identifier:
                                                identifier: k_p
                                            operator: Mul
                                            right:
                                              Identifier:
                                                identifier: e
                                        operator: Add
                                        right:
                                          Binary:
                                            left:
                                              Identifier:
                                                identifier: k_i
                                            operator: Mul
                                            right:
                                              Identifier:
                                                identifier: e_i
                                    operator: Add
                                    right:
                                      Binary:
                                        left:
                                          Identifier:
                                            identifier: k_d
                                        operator: Mul
                                        right:
                                          Identifier:
                                            identifier: e_d
                    - ExpressionLast:
                        Identifier:
                          identifier: u
  - path: src/functions.rs
    items:
      - Function:
          signature:
            public_visibility: true
            name: min
            receiver: ~
            inputs:
              - - a
                - Identifier:
                    identifier: f64
              - - b
                - Identifier:
                    identifier: f64
            output:
              Identifier:
                identifier: f64
          body:
            statements:
              - Let:
                  pattern:
                    Identifier:
                      reference: false
                      mutable: false
                      identifier: test
                  expression:
                    Binary:
                      left:
                        Identifier:
                          identifier: a
                      operator: Grt
                      right:
                        Identifier:
                          identifier: b
              - Let:
                  pattern:
                    Identifier:
                      reference: false
                      mutable: false
                      identifier: result
                  expression:
                    IfThenElse:
                      condition:
                        Identifier:
                          identifier: test
                      then_branch:
                        statements:
                          - ExpressionLast:
                              Identifier:
                                identifier: b
                      else_branch:
                        statements:
                          - ExpressionLast:
                              Identifier:
                                identifier: a
              - ExpressionLast:
                  Identifier:
                    identifier: result
  - path: src/typedefs.rs
    items:
      - Structure:
          public_visibility: true
          name: GainPID
          fields:
            - public_visibility: true
              name: k_p
              type:
                Identifier:
                  identifier: f64
            - public_visibility: true
              name: k_i
              type:
                Identifier:
                  identifier: f64
            - public_visibility: true
              name: k_d
              type:
                Identifier:
                  identifier: f64
  - path: src/lib.rs
    items:
      - Import:
          Module:
            public_visibility: true
            name: integrate_i
      - Import:
          Module:
            public_visibility: true
            name: derive_d
      - Import:
          Module:
            public_visibility: true
            name: pid_u
      - Import:
          Module:
            public_visibility: true
            name: functions
      - Import:
          Module:
            public_visibility: true
            name: typedefs

