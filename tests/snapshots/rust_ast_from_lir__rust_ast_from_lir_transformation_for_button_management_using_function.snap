---
source: tests/rust_ast_from_lir.rs
expression: project
---
directory: ""
files:
  - path: src/counter_o.rs
    items:
      - Structure:
          public_visibility: true
          name: CounterOInput
          fields:
            - public_visibility: true
              name: res
              type:
                Identifier:
                  identifier: bool
            - public_visibility: true
              name: inc
              type:
                Identifier:
                  identifier: i64
      - Structure:
          public_visibility: true
          name: CounterOState
          fields:
            - public_visibility: false
              name: mem_o
              type:
                Identifier:
                  identifier: i64
      - Implementation:
          trait_name: ~
          type_name: CounterOState
          items:
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: init
                  receiver: ~
                  inputs: []
                  output:
                    Identifier:
                      identifier: CounterOState
                body:
                  statements:
                    - ExpressionLast:
                        Structure:
                          name: CounterOState
                          fields:
                            - name: mem_o
                              expression:
                                Literal:
                                  literal:
                                    Integer: 0
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: step
                  receiver:
                    reference: false
                    mutable: false
                  inputs:
                    - - input
                      - Identifier:
                          identifier: CounterOInput
                  output:
                    Tuple:
                      elements:
                        - Identifier:
                            identifier: CounterOState
                        - Identifier:
                            identifier: i64
                body:
                  statements:
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: o
                        expression:
                          IfThenElse:
                            condition:
                              FieldAccess:
                                expression:
                                  Identifier:
                                    identifier: input
                                field: res
                            then_branch:
                              statements:
                                - ExpressionLast:
                                    Literal:
                                      literal:
                                        Integer: 0
                            else_branch:
                              statements:
                                - ExpressionLast:
                                    Binary:
                                      left:
                                        Unary:
                                          operator: Brackets
                                          expression:
                                            FieldAccess:
                                              expression:
                                                Identifier:
                                                  identifier: self
                                              field: mem_o
                                      operator: Add
                                      right:
                                        FieldAccess:
                                          expression:
                                            Identifier:
                                              identifier: input
                                          field: inc
                    - ExpressionLast:
                        Tuple:
                          elements:
                            - Structure:
                                name: CounterOState
                                fields:
                                  - name: mem_o
                                    expression:
                                      Identifier:
                                        identifier: o
                            - Identifier:
                                identifier: o
  - path: src/reset_button_user_reset_request.rs
    items:
      - Import:
          Use:
            public_visibility: false
            tree:
              Path:
                module_name: crate
                tree:
                  Path:
                    module_name: typedefs
                    tree:
                      Name:
                        name: Button
                        alias: ~
      - Import:
          Use:
            public_visibility: false
            tree:
              Path:
                module_name: crate
                tree:
                  Path:
                    module_name: counter_o
                    tree: Star
      - Structure:
          public_visibility: true
          name: ResetButtonUserResetRequestInput
          fields:
            - public_visibility: true
              name: button_state
              type:
                Identifier:
                  identifier: Button
            - public_visibility: true
              name: period
              type:
                Identifier:
                  identifier: i64
            - public_visibility: true
              name: reset_limit_1
              type:
                Identifier:
                  identifier: i64
            - public_visibility: true
              name: reset_limit_2
              type:
                Identifier:
                  identifier: i64
      - Structure:
          public_visibility: true
          name: ResetButtonUserResetRequestState
          fields:
            - public_visibility: false
              name: mem_res
              type:
                Identifier:
                  identifier: bool
            - public_visibility: false
              name: mem_user_reset_request
              type:
                Identifier:
                  identifier: bool
            - public_visibility: false
              name: counter_o_counter
              type:
                Identifier:
                  identifier: CounterOState
      - Implementation:
          trait_name: ~
          type_name: ResetButtonUserResetRequestState
          items:
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: init
                  receiver: ~
                  inputs: []
                  output:
                    Identifier:
                      identifier: ResetButtonUserResetRequestState
                body:
                  statements:
                    - ExpressionLast:
                        Structure:
                          name: ResetButtonUserResetRequestState
                          fields:
                            - name: mem_res
                              expression:
                                Literal:
                                  literal:
                                    Boolean: true
                            - name: mem_user_reset_request
                              expression:
                                Literal:
                                  literal:
                                    Boolean: false
                            - name: counter_o_counter
                              expression:
                                FunctionCall:
                                  function:
                                    Identifier:
                                      identifier: "CounterOState::init"
                                  arguments: []
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: step
                  receiver:
                    reference: false
                    mutable: false
                  inputs:
                    - - input
                      - Identifier:
                          identifier: ResetButtonUserResetRequestInput
                  output:
                    Tuple:
                      elements:
                        - Identifier:
                            identifier: ResetButtonUserResetRequestState
                        - Identifier:
                            identifier: bool
                body:
                  statements:
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: res
                        expression:
                          Binary:
                            left:
                              Unary:
                                operator: Brackets
                                expression:
                                  Binary:
                                    left:
                                      FieldAccess:
                                        expression:
                                          Identifier:
                                            identifier: input
                                        field: button_state
                                    operator: Eq
                                    right:
                                      Literal:
                                        literal:
                                          Enumeration:
                                            - Button
                                            - Pressed
                            operator: And
                            right:
                              Unary:
                                operator: Brackets
                                expression:
                                  FieldAccess:
                                    expression:
                                      Identifier:
                                        identifier: self
                                    field: mem_res
                    - Let:
                        pattern:
                          Tuple:
                            elements:
                              - Identifier:
                                  reference: false
                                  mutable: false
                                  identifier: counter_o_counter
                              - Identifier:
                                  reference: false
                                  mutable: false
                                  identifier: counter
                        expression:
                          MethodCall:
                            receiver:
                              FieldAccess:
                                expression:
                                  Identifier:
                                    identifier: self
                                field: counter_o_counter
                            method: step
                            arguments:
                              - Structure:
                                  name: CounterOInput
                                  fields:
                                    - name: res
                                      expression:
                                        Identifier:
                                          identifier: res
                                    - name: inc
                                      expression:
                                        FieldAccess:
                                          expression:
                                            Identifier:
                                              identifier: input
                                          field: period
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: user_reset_request
                        expression:
                          Match:
                            matched:
                              FieldAccess:
                                expression:
                                  Identifier:
                                    identifier: input
                                field: button_state
                            arms:
                              - pattern:
                                  Literal:
                                    literal:
                                      Enumeration:
                                        - Button
                                        - Released
                                guard: ~
                                body:
                                  FieldAccess:
                                    expression:
                                      Identifier:
                                        identifier: self
                                    field: mem_user_reset_request
                              - pattern:
                                  Literal:
                                    literal:
                                      Enumeration:
                                        - Button
                                        - Pressed
                                guard: ~
                                body:
                                  Binary:
                                    left:
                                      Identifier:
                                        identifier: counter
                                    operator: Geq
                                    right:
                                      Binary:
                                        left:
                                          FieldAccess:
                                            expression:
                                              Identifier:
                                                identifier: input
                                            field: reset_limit_1
                                        operator: Add
                                        right:
                                          FieldAccess:
                                            expression:
                                              Identifier:
                                                identifier: input
                                            field: reset_limit_2
                    - ExpressionLast:
                        Tuple:
                          elements:
                            - Structure:
                                name: ResetButtonUserResetRequestState
                                fields:
                                  - name: mem_res
                                    expression:
                                      Binary:
                                        left:
                                          FieldAccess:
                                            expression:
                                              Identifier:
                                                identifier: input
                                            field: button_state
                                        operator: Eq
                                        right:
                                          Literal:
                                            literal:
                                              Enumeration:
                                                - Button
                                                - Released
                                  - name: mem_user_reset_request
                                    expression:
                                      Identifier:
                                        identifier: user_reset_request
                                  - name: counter_o_counter
                                    expression:
                                      Identifier:
                                        identifier: counter_o_counter
                            - Identifier:
                                identifier: user_reset_request
  - path: src/reset_button_user_reset_request_state.rs
    items:
      - Import:
          Use:
            public_visibility: false
            tree:
              Path:
                module_name: crate
                tree:
                  Path:
                    module_name: typedefs
                    tree:
                      Name:
                        name: Button
                        alias: ~
      - Import:
          Use:
            public_visibility: false
            tree:
              Path:
                module_name: crate
                tree:
                  Path:
                    module_name: counter_o
                    tree: Star
      - Import:
          Use:
            public_visibility: false
            tree:
              Path:
                module_name: crate
                tree:
                  Path:
                    module_name: functions
                    tree:
                      Name:
                        name: reset_state_management
                        alias: ~
      - Structure:
          public_visibility: true
          name: ResetButtonUserResetRequestStateInput
          fields:
            - public_visibility: true
              name: button_state
              type:
                Identifier:
                  identifier: Button
            - public_visibility: true
              name: period
              type:
                Identifier:
                  identifier: i64
            - public_visibility: true
              name: reset_limit_1
              type:
                Identifier:
                  identifier: i64
      - Structure:
          public_visibility: true
          name: ResetButtonUserResetRequestStateState
          fields:
            - public_visibility: false
              name: mem_res
              type:
                Identifier:
                  identifier: bool
            - public_visibility: false
              name: counter_o_counter
              type:
                Identifier:
                  identifier: CounterOState
      - Implementation:
          trait_name: ~
          type_name: ResetButtonUserResetRequestStateState
          items:
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: init
                  receiver: ~
                  inputs: []
                  output:
                    Identifier:
                      identifier: ResetButtonUserResetRequestStateState
                body:
                  statements:
                    - ExpressionLast:
                        Structure:
                          name: ResetButtonUserResetRequestStateState
                          fields:
                            - name: mem_res
                              expression:
                                Literal:
                                  literal:
                                    Boolean: true
                            - name: counter_o_counter
                              expression:
                                FunctionCall:
                                  function:
                                    Identifier:
                                      identifier: "CounterOState::init"
                                  arguments: []
            - AssociatedMethod:
                signature:
                  public_visibility: true
                  name: step
                  receiver:
                    reference: false
                    mutable: false
                  inputs:
                    - - input
                      - Identifier:
                          identifier: ResetButtonUserResetRequestStateInput
                  output:
                    Tuple:
                      elements:
                        - Identifier:
                            identifier: ResetButtonUserResetRequestStateState
                        - Identifier:
                            identifier: ResetState
                body:
                  statements:
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: res
                        expression:
                          Binary:
                            left:
                              Unary:
                                operator: Brackets
                                expression:
                                  Binary:
                                    left:
                                      FieldAccess:
                                        expression:
                                          Identifier:
                                            identifier: input
                                        field: button_state
                                    operator: Eq
                                    right:
                                      Literal:
                                        literal:
                                          Enumeration:
                                            - Button
                                            - Pressed
                            operator: And
                            right:
                              Unary:
                                operator: Brackets
                                expression:
                                  FieldAccess:
                                    expression:
                                      Identifier:
                                        identifier: self
                                    field: mem_res
                    - Let:
                        pattern:
                          Tuple:
                            elements:
                              - Identifier:
                                  reference: false
                                  mutable: false
                                  identifier: counter_o_counter
                              - Identifier:
                                  reference: false
                                  mutable: false
                                  identifier: counter
                        expression:
                          MethodCall:
                            receiver:
                              FieldAccess:
                                expression:
                                  Identifier:
                                    identifier: self
                                field: counter_o_counter
                            method: step
                            arguments:
                              - Structure:
                                  name: CounterOInput
                                  fields:
                                    - name: res
                                      expression:
                                        Identifier:
                                          identifier: res
                                    - name: inc
                                      expression:
                                        FieldAccess:
                                          expression:
                                            Identifier:
                                              identifier: input
                                          field: period
                    - Let:
                        pattern:
                          Identifier:
                            reference: false
                            mutable: false
                            identifier: user_reset_request_state
                        expression:
                          FunctionCall:
                            function:
                              Identifier:
                                identifier: reset_state_management
                            arguments:
                              - FieldAccess:
                                  expression:
                                    Identifier:
                                      identifier: input
                                  field: button_state
                              - Identifier:
                                  identifier: counter
                              - FieldAccess:
                                  expression:
                                    Identifier:
                                      identifier: input
                                  field: reset_limit_1
                    - ExpressionLast:
                        Tuple:
                          elements:
                            - Structure:
                                name: ResetButtonUserResetRequestStateState
                                fields:
                                  - name: mem_res
                                    expression:
                                      Binary:
                                        left:
                                          FieldAccess:
                                            expression:
                                              Identifier:
                                                identifier: input
                                            field: button_state
                                        operator: Eq
                                        right:
                                          Literal:
                                            literal:
                                              Enumeration:
                                                - Button
                                                - Released
                                  - name: counter_o_counter
                                    expression:
                                      Identifier:
                                        identifier: counter_o_counter
                            - Identifier:
                                identifier: user_reset_request_state
  - path: src/functions.rs
    items:
      - Function:
          signature:
            public_visibility: true
            name: reset_state_management
            receiver: ~
            inputs:
              - - button_state
                - Identifier:
                    identifier: Button
              - - counter
                - Identifier:
                    identifier: i64
              - - reset_limit_1
                - Identifier:
                    identifier: i64
            output:
              Identifier:
                identifier: ResetState
          body:
            statements:
              - Let:
                  pattern:
                    Identifier:
                      reference: false
                      mutable: false
                      identifier: result
                  expression:
                    Match:
                      matched:
                        Identifier:
                          identifier: button_state
                      arms:
                        - pattern:
                            Literal:
                              literal:
                                Enumeration:
                                  - Button
                                  - Released
                          guard: ~
                          body:
                            Literal:
                              literal:
                                Enumeration:
                                  - ResetState
                                  - Confirmed
                        - pattern:
                            Literal:
                              literal:
                                Enumeration:
                                  - Button
                                  - Pressed
                          guard:
                            Binary:
                              left:
                                Identifier:
                                  identifier: counter
                              operator: Geq
                              right:
                                Identifier:
                                  identifier: reset_limit_1
                          body:
                            Literal:
                              literal:
                                Enumeration:
                                  - ResetState
                                  - InProgress
                        - pattern: Default
                          guard: ~
                          body:
                            Literal:
                              literal:
                                Enumeration:
                                  - ResetState
                                  - Confirmed
              - ExpressionLast:
                  Identifier:
                    identifier: result
  - path: src/typedefs.rs
    items:
      - Enumeration:
          public_visibility: true
          name: Button
          elements:
            - Released
            - Pressed
      - Enumeration:
          public_visibility: true
          name: ResetState
          elements:
            - InProgress
            - Confirmed
  - path: src/lib.rs
    items:
      - Import:
          Module:
            public_visibility: true
            name: counter_o
      - Import:
          Module:
            public_visibility: true
            name: reset_button_user_reset_request
      - Import:
          Module:
            public_visibility: true
            name: reset_button_user_reset_request_state
      - Import:
          Module:
            public_visibility: true
            name: functions
      - Import:
          Module:
            public_visibility: true
            name: typedefs

